<html>
  <head>
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
      name="viewport"
    />
    <script src="https://unpkg.com/glplotter"></script>
    <script src="./input.js"></script>
  </head>
  <body style="margin: 0">
    <div
      id="gl-container"
      style="
        background-color: black;
        width: 100vw;
        max-width: 100%;
        height: 577px;
        position: relative;
      "
    ></div>

    <input id="ds" value="50" />

    <button onclick="updateDisplayRate()">Update display rate</button>
    <script>
      var plotter;

      function updateDisplayRate() {
        const value = document.getElementById('ds').value;
        plotter.displayRate(value);
      }

      window.addEventListener('DOMContentLoaded', () => {
        plotter = glplotter({
          referenceContainer: document.getElementById('gl-container'),
          displayRate: 50,
        });

        setInterval(() => {
          plotter.bufferData(generateData('ch1'));
        }, 50);

        plotter.addSignal({
          id: 'sig1',
          channelId: 'ch1',
          color: '#fff',
          visible: true,
          amplitude: 8,
          pitch: 1,
          chartHeight: 70,
          yPosition: 95,
        });
      });
    </script>
  </body>
</html>
